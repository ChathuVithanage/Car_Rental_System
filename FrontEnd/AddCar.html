<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Car</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>

    <style>
        .listing-details__features-box {
            position: relative;
            display: block;
            padding: 40px 50px 38px;
        // border-radius: var(--thm-border-radius);
            margin-top: 30px;
        }
        *, ::after, ::before {
            box-sizing: border-box;
        }

        .nav-link h5:hover{
            color: firebrick;
        }
    </style>

</head>
<body>

<header class="sticky-top">
    <nav class="navbar navbar-expand-lg bg-body-tertiary " style="background-color: #2c3945; height: 55px; ">
        <img src="assest/classic-car.png" class="logo" style="width: 90px">
        <label style="width: 96px"><h5 style="color: yellow; text-shadow: 1px 1px 2px wheat, 0 0 25px white, 0 0 5px white;">Car Vista</h5></label>

        <div class="container-fluid">
            <a class="navbar-brand" href="#"></a>

            <div class="nav justify-content-end" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    <a class="nav-link active fw-bold" aria-current="page" href="index.html" style=" padding-left: 18px; padding-right: 25px; color: white"><h5>Home</h5></a>
                    <a class="nav-link fw-bold" href="" style=" padding-left: 18px; padding-right: 25px; color: white"><h5>Car</h5></a>
                    <a class="nav-link fw-bold" href="index.html#aboutUs" style="padding-left: 18px; padding-right: 25px; color: white"><h5>About Us</h5></a>

                </div>
            </div>

        </div>
    </nav>
</header>

<section>
    <div class="line1" style="width: 100%; height: 30px; background-color: #b3d9ff"></div>
    <div class="tx" style="text-align: center">
        <h5>Add New Car</h5>

    </div>


    <div class="container text-center">


        <form id="CarRegister">
        <div class="row">
            <div class="col-2">

            </div>
            <div class="col-8" style="background-color:  #ccccff; height: 80vh">

                <div class="row">
                <div class="col-6">
                    <div class="mb-3" style="stroke: black; padding-top: 15px">
                        <input class="form-control" id="txtVehicleNo" type="text" name="vehicleNo" placeholder="Vehicle No" style="border-color: darkslateblue" >
                    </div>
                </div>
                <div class="col-6">
                    <div class="mb-3" style="stroke: black; padding-top: 15px">
                        <input class="form-control" id="txtBrand" type="text" name="brand" placeholder="Brand" style="border-color: darkslateblue" >
                    </div>
                </div>
                </div>

                <div class="row">
                    <div class="col-6">
                        <div class="mb-3" style="stroke: black; padding-top: 8px">
                            <input class="form-control" id="txtModel" type="text" name="model" placeholder="Model" style="border-color: darkslateblue" >
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="mb-3" style="stroke: black; padding-top: 8px">
                            <input class="form-control" id="txtMileage" type="text" name="mileage" placeholder="Mileage" style="border-color: darkslateblue" >
                        </div>
                    </div>
                    <div class="col-6">

                        <div class="row">
                                <div class="col">
                                    <div class="mb-3" style="stroke: black; padding-top: 5px">
                                        <label class="color" style="font-size: 15px">color</label>
                                        <input class="form-control" id="txtColor" type="color" name="color" placeholder="Color" style="border-color: darkslateblue; height: 38px" >
                                    </div>
                                </div>
                                <div class="col order-5">
                                    <div class="mb-3" style="stroke: black; padding-top: 5px">

                                    <label class="Type" style="font-size: 15px">Type</label>
                                    <select class="form-select" aria-label="Default select example" name="type" id="cmbType">
                                        <option selected>select</option>
                                        <option value="General">General</option>
                                        <option value="Premium">Premium</option>
                                        <option value="Luxury">Luxury</option>
                                    </select>
                                    </div>

                                </div>
                                <div class="col order-1">

                                    <div class="mb-3" style="stroke: black; padding-top: 5px">
                                        <label class="Passengers" style="font-size: 15px">Passengers</label>
                                        <input class="form-control" id="txtPassengers" type="number" name="passengers" placeholder="Passengers" style="border-color: darkslateblue" >
                                    </div>
                                </div>
                            </div>
                    </div>

                    <div class="col-6">

                        <div class="row">
                            <div class="col-sm-5 col-md-6">
                                <div class="mb-3" style="stroke: black; padding-top: 5px">

                                    <label class="Fuel Type" style="font-size: 15px">Fuel Type</label>
                                    <select class="form-select" aria-label="Default select example" name="fuelType" id="cmbFuelType">
                                        <option value="Petrol">Petrol</option>
                                        <option value="Diesel">Diesel</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-5 offset-sm-2 col-md-6 offset-md-0">
                                <div class="mb-3" style="stroke: black; padding-top: 5px">

                                    <label class="Transmission" style="font-size: 15px">Transmission</label>
                                    <select class="form-select" aria-label="Default select example" name="transmission" id="cmbTransmission">
                                        <option value="Manual">Manual</option>
                                        <option value="Auto">Auto</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="row">
                            <div class="col">

                                    <div class="mb-3" style="stroke: black; padding-top: 8px">
                                        <input class="form-control" id="txtServiceMileage" type="text" name="serviceMileage" placeholder="Service Mileage" style="border-color: darkslateblue" >

                                </div>

                            </div>
                            <div class="col order-5">
                                    <div class="mb-3" style="stroke: black; padding-top: 8px">
                                        <input class="form-control" id="txtExtraPrice" type="text" name="extraPrice" placeholder="Extra price" style="border-color: darkslateblue" >
                                    </div>

                            </div>
                            <div class="col order-2">
                                <div class="col-6" style="padding-top: 12px">
                                <div class="form-check form-switch" >
                                    <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault" name="isAvailable" >
                                    <label class="form-check-label" for="flexSwitchCheckDefault">Is Available</label>
                                </div>
                                </div>
                            </div>
                    </div>

                    <div class="col-6">

                        <div class="row">
                            <div class="col-sm-5 col-md-6">
                                <div class="mb-3" style="stroke: black; padding-top: 8px">
                                    <input class="form-control" id="txtDailyRate" type="text" name="dailyRate" placeholder="Daily Rate" style="border-color: darkslateblue" >
                                </div>
                            </div>
                            <div class="col-sm-5 offset-sm-2 col-md-6 offset-md-0">
                                <div class="mb-3" style="stroke: black; padding-top: 8px">
                                    <input class="form-control" id="txtFreeMileage1" type="text" name="freeMileageForDay" placeholder="Free Mileage(km)" style="border-color: darkslateblue" >
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="col-6">

                        <div class="row">
                            <div class="col-sm-5 col-md-6">
                                <div class="mb-3" style="stroke: black; padding-top: 8px">
                                    <input class="form-control" id="txtMonthlyRate" type="text" name="monthlyRate" placeholder="Monthly Rate" style="border-color: darkslateblue" >
                                </div>
                            </div>
                            <div class="col-sm-5 offset-sm-2 col-md-6 offset-md-0">
                                <div class="mb-3" style="stroke: black; padding-top: 8px">
                                    <input class="form-control" id="txtFreeMileage2" type="text" name="freeMileageForMonth" placeholder="Free Mileage(km)" style="border-color: darkslateblue" >
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="col-6">
                    <div class="input-group mb-3">
                        <input class="form-control" id="txtImgOne" type="file" name="file1" placeholder="img_front" style="border-color: darkslateblue" >
                    </div>
                    </div>

                    <div class="col-6">
                        <div class="input-group mb-3">
                            <input class="form-control" id="txtImgTwo" type="file" name="file2" placeholder="img_back" style="border-color: darkslateblue" >
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="input-group mb-3">
                            <input class="form-control" id="txtImgThree" type="file" name="file3" placeholder="img_side" style="border-color: darkslateblue" >
                        </div>
                    </div>

                    <div class="col-6">
                        <div class="input-group mb-3">
                             <input class="form-control" id="txtImgFour" type="file" name="file4" placeholder="img_interior" style="border-color: darkslateblue" >
                        </div>
                    </div>

                    <div class="row">
                    <div class="col-6">

                    </div>

                    <div class="col-6">
                        <button type="button" class="btn btn-secondary" id="saveCar">Save Car</button>
                        <button type="button" class="btn btn-secondary" id="searchCar">search</button>
                        <button type="button" class="btn btn-secondary" id="updateCar">Update Car</button>
                        <button type="button" class="btn btn-secondary" id="loadCar">loadAll</button>
                    </div>
                    </div>

                </div>
            </div>


        </div>
        </form>

    </div>

</section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
<!--<script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>-->
<script src="https://kit.fontawesome.com/771f6b37f4.js" crossorigin="anonymous"></script>
<script src="./jquery-3.6.1.min.js"></script>

<script>

    let baseUrl = "http://localhost:8080/Car_Rental_System_war/"

    // form eke id eka, file chooser 4 id, name tika samana wenna one  controller eke @RequestParam
    function clearCarRegister() {
        $("form#CarRegister")[0].reset();
    }
    function prepareCarForm(url, method) {
        var form = $("#CarRegister").serializeArray();
        var formData = new FormData();
        $.each(form, function (key, input) {
            formData.append(input.name, input.value);
        });

        formData.append("file1", $("#txtImgOne")[0].files[0]);
        formData.append("file2", $("#txtImgTwo")[0].files[0]);
        formData.append("file3", $("#txtImgThree")[0].files[0]);
        formData.append("file4", $("#txtImgFour")[0].files[0]);
        $.ajax({
            url: baseUrl + url,
            method: method,
            processData: false,
            contentType: false,
            dataType: "json",
            data: formData,
            success: function (res) {
                alert(res.message);
                clearCarRegister();
                // loadAllCars();
            },
            error: function (error) {
                alert(error);
            },
        });
    }
    // car-add
    $("#saveCar").click(function () {
        prepareCarForm("car/save", "post");
    });
    // car-update
    $("#updateCar").click(function () {
        prepareCarForm("car/update", "post");
    });

    $("#searchCar").click(function (){
        $.ajax({
            url:baseUrl+"car/save?vehicleNo=" + $("#txtVehicleNo").val(),
            dataType:"json",
            method: "get",
            success:function (res){
                $("#txtBrand").val(res.data.brand)
                $("#txtModel").val(res.data.model)
                $("#txtMileage").val(res.data.mileage)
                $("#txtColor").val(res.data.color)
                $("#cmbType").val(res.data.types)
                $("#txtPassengers").val(res.data.passengers)
                $("#cmbFuelType").val(res.data.fuelType)
                $("#cmbTransmission").val(res.data.transmission)
                $("#txtServiceMileage").val(res.data.serviceMileage)
                $("#txtExtraPrice").val(res.data.extraPrice)
                $("#flexSwitchCheckDefault").val(res.data.isAvailable)
                $("#txtDailyRate").val(res.data.dailyRate)
                $("#txtFreeMileage1").val(res.data.freeMileageForDay)
                $("#txtMonthlyRate").val(res.data.monthlyRate)
                $("#txtFreeMileage2").val(res.data.freeMileageForMonth)


            }
        })
    });


    function clearCarRegister() {
        $("form#CarRegister")[0].reset();
    }




</script>

</body>
</html>